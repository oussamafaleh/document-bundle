services:

    #TOKEN
    App\Security\Voter\ItemVoter:
        arguments: ['@doctrine.orm.default_entity_manager','@security.helper','@monolog.logger']
   #VIEW          
    listener.view:
        class: App\EventListener\ViewListener
        arguments: ['@translator.default', '@manager.logger']
        tags:
            - { name: kernel.event_listener, event: kernel.view, method: onKernelView }
        #VIEW
    listener.action:
        class: App\EventListener\ActionListener
        arguments: [ '@manager.logger' ]
        tags:
            - { name: kernel.event_listener, event: kernel.response, method: onKernelResponse }

    listener.validator:
        class: App\EventListener\ParameterValidatorListener
        arguments: ['@annotation_reader', '@validator', '@doctrine' ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelRequest }

    listener.twigvar:
        class: App\EventListener\TwigEventSubscriber
        arguments: ['@twig', '@App\Manager\DashboardManager','@form.factory','@request_stack' ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onControllerEvent }

#    listener.rule_listener:
#        class: App\EventListener\RuleListener
#        tags:
#            - { name: kernel.event_subscriber }
#        arguments: ['@doctrine.orm.entity_manager','@App\Manager\RuleEventManager']

    manager.logger:
        class: App\Manager\LoggerManager
        arguments: ['@doctrine.orm.default_entity_manager','@request_stack', 'true','@security.helper' ]
        public: false

    listener.exception:
        class: App\EventListener\ExceptionListener
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }

    App\Manager\FileManager:
        public: true
        class: App\Manager\FileManager
        arguments: [ '@doctrine.orm.entity_manager', '%uploads_directory%' , '@App\Manager\FolderManager' , '@App\Manager\ItemManager', '@event_dispatcher']
        
    App\Manager\FolderManager:
        public: true
        class: App\Manager\FolderManager
        arguments: [ '@doctrine.orm.entity_manager','@security.helper','@form.factory' ]

    App\Manager\DashboardManager:
        public: true
        class: App\Manager\DashboardManager
        arguments: [ '@doctrine.orm.entity_manager' ]

    App\Manager\FileChunksManager:
        public: true
        class: App\Manager\FileChunksManager
        arguments: [ '@doctrine.orm.entity_manager','@doctrine_mongodb.odm.document_manager' ] #

    App\Manager\ItemManager:
        public: true
        class: App\Manager\ItemManager
        arguments: [ '@doctrine.orm.entity_manager' , '%uploads_directory%' ,'@form.factory' ]  

    App\Manager\RuleManager:
        public: true
        class: App\Manager\RuleManager
        arguments: [ '@doctrine.orm.entity_manager','@security.helper','@form.factory']